C:\Users\usewr\dbwdi\backend\.venv\Lib\site-packages\ctranslate2\__init__.py:8: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  import pkg_resources
==========================================================================================
                                  RAG Evaluation Script                                   
==========================================================================================
Loading evaluation dataset from C:\Users\usewr\dbwdi\backend\tests\data\rag_eval.json...
Loaded 5 test cases.
Connecting to database...
Found 23 recipes in database.

Running evaluation...
  [1/5] Processing test_001... [OK] (HR=66.67%, P@3=33.33%, 2.063s)
  [2/5] Processing test_002... [OK] (HR=50.00%, P@3=33.33%, 2.072s)
  [3/5] Processing test_003... [OK] (HR=66.67%, P@3=66.67%, 2.073s)
  [4/5] Processing test_004... [OK] (HR=0.00%, P@3=0.00%, 2.066s)
  [5/5] Processing test_005... [OK] (HR=0.00%, P@3=0.00%, 2.071s)

==========================================================================================
                                  RAG EVALUATION SUMMARY                                  
==========================================================================================
Test ID      | Hit Rate   | P@3      | Nutr. Comp.  | Macro Comp.  | Latency (s)  | Embed?  
------------------------------------------------------------------------------------------
test_001     | 66.67%     | 33.33%   | 100.00%      | 100.00%      | 2.063        | Yes     
test_002     | 50.00%     | 33.33%   | 0.00%        | 100.00%      | 2.072        | Yes     
test_003     | 66.67%     | 66.67%   | 100.00%      | 100.00%      | 2.073        | Yes     
test_004     | 0.00%      | 0.00%    | 100.00%      | 100.00%      | 2.066        | Yes     
test_005     | 0.00%      | 0.00%    | 100.00%      | 100.00%      | 2.071        | Yes     
------------------------------------------------------------------------------------------
AVERAGE      | 36.67%     | 26.67%   | 80.00%       | 100.00%      | 2.069        | 5/5     
==========================================================================================

=== Aggregate KPIs ===
Average Hit Rate:        36.67%
Average Precision@3:     26.67%
Average Nutrition Compliance: 80.00%
Average Macro Compliance: 100.00%
Average Response Latency: 2.069 seconds
Embeddings Used:         5/5 tests
Total Test Cases:        5

=== Per-Test-Case Details ===

test_001:
  Retrieved: 5 recipes
  Expected:  3 recipes
  Hit Rate:  66.67%
  Precision@3: 33.33%
  Latency:   2.063s
  Retrieved Titles: Tropical Green Revive Bowl, Minted Melon Silk Bowl, Golden Berry Glow Bowl...
  Expected Titles:  Sunrise Citrus Glow Bowl, Tropical Green Revive Bowl, Radiant Roots Bowl

test_002:
  Retrieved: 5 recipes
  Expected:  2 recipes
  Hit Rate:  50.00%
  Precision@3: 33.33%
  Latency:   2.072s
  Retrieved Titles: Forest Berry Crunch Bowl, Guava Pine Oat Bowl, Peach Basil Bliss Bowl...
  Expected Titles:  Forest Berry Crunch Bowl, Sacha Super Seed Bowl

test_003:
  Retrieved: 5 recipes
  Expected:  3 recipes
  Hit Rate:  66.67%
  Precision@3: 66.67%
  Latency:   2.073s
  Retrieved Titles: Tropical Sunset Pitaya Bowl, Tropical Green Revive Bowl, Jackfruit Paradise Bowl...
  Expected Titles:  Tropical Sunset Pitaya Bowl, Tropical Green Revive Bowl, Sunrise Citrus Glow Bowl

test_004:
  Retrieved: 5 recipes
  Expected:  1 recipes
  Hit Rate:  0.00%
  Precision@3: 0.00%
  Latency:   2.066s
  Retrieved Titles: Tropical Green Revive Bowl, Radiant Roots Bowl, Minted Melon Silk Bowl...
  Expected Titles:  Forest Berry Crunch Bowl

test_005:
  Retrieved: 5 recipes
  Expected:  2 recipes
  Hit Rate:  0.00%
  Precision@3: 0.00%
  Latency:   2.071s
  Retrieved Titles: Tropical Green Revive Bowl, Autumn Harvest Bowl, Acai Boost Bowl...
  Expected Titles:  Mango Lucuma Crunch Bowl, Sacha Super Seed Bowl

[SUCCESS] Evaluation completed successfully.
